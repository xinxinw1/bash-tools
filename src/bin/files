#!/usr/bin/bash

prt0=""
exc=()
args=()
while [[ $# > 0 ]]; do
  key="$1"
  shift
  
  case $key in
    -0|-print0)
      prt0="true"
    ;;
    -n|-exclude)
      exc+=("$1")
      shift
    ;;
    *)
      args+=("$key")
    ;;
  esac
done

for i in "${exc[@]}"; do
  args+=(-not \( -path "$i" -prune \))
done

args+=(-type f)

if [ -n "$prt0" ]; then
  args+=(-print0)
fi

find "${args[@]}"
